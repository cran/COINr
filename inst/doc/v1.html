<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Changes from COINr v1.0.0</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Changes from COINr v1.0.0</h1>



<p>If you were using COINr prior to v.1.0 you may have updated the
package and found that code calling COINr functions no longer works!
What is going on?</p>
<p>COINr has undergone some major changes and most of the syntax has
changed. So major that I skipped directly from v0.6 to v1.0 without any
intermediate steps. First of all, if you were using COINr previously, I
would like to say SORRY for any inconvenience caused by these changes.
However, the changes are worth it, and this is a one-off thing - I won’t
be doing a seismic change like this again.</p>
<p>This vignette helps you to transition from COINr 0.6.x to 1.0 and
explains what has happened. In short, most function names have changed,
the package is more robust and flexible, panel data is more supported,
interactive plots have been moved to a separate package available on
GitHub, and if you don’t like all this you can install the archive
version of the package called “COINr6” and everything will go back to
how it was. Let’s go through these things one by one.</p>
<div id="why" class="section level1">
<h1>Why</h1>
<p>If you just want to know what has changed and how to deal with it,
skip this section. If you want to know why things have changed, read
on.</p>
<p>The short story is that I found quite a few flaws in the package
which I was not happy with, given that it is in the public domain. I
decided to address these flaws in one giant revision, rather than a long
series of updates. I’ll explain each of these points here below.</p>
<div id="robustness-and-efficiency" class="section level2">
<h2>Robustness and efficiency</h2>
<p>COINr was the first CRAN package that I built (everyone say “aww”).
In the process, I learned a lot about package development, as well as
principles about programming in general. However, since I learned this
while building the package, especially the first parts of the package
that I wrote were (in retrospect) not written very well. For example,
although I defined a “COIN” class, I didn’t define methods for the COIN.
Much of the code was not written in a “functional” way, and there were
not enough checks on the inputs and outputs of the code. All this meant
that the code was not very robust and had to be patched, a lot. This
made it hard to maintain, less robust, and also slower for the user. As
a consequence, I decided to re-write most functions, many from scratch,
with a higher standard of programming. I also slimmed down the “COIN”
class to a more streamlined “coin” class.</p>
</div>
<div id="focus" class="section level2">
<h2>Focus</h2>
<p>COINr is a package meant to focus on developing composite indicators.
But the focus got lost at some point when I got carried away with html
plotly plots and shiny apps. These things, although nice, were in
retrospect not really that useful in the package and are also difficult
to maintain and bloat out the package. I decided to cut out all
interactive plots and apps, but these can still be accessed through the
COINr6 package and the conversion functions between COINr and COINr6
(see below).</p>
</div>
<div id="dependencies" class="section level2">
<h2>Dependencies</h2>
<p>As a result of the first two points (inexperience plus straying off
track), COINr had many dependencies, i.e. packages that had to be
installed to install COINr. Although there is no harm in loading 10 or
20 packages when performing data analysis in R, this can become a
problem if you are building a package because every user has to have
these packages installed. If you have ever had to install several
packages at the same time in R, you have probably run into some kind of
problem. Moreover, COINr is dependent on any changes in those packages,
and that makes maintaining it more difficult. This meant that in
practice, COINr was not always easy to install. I decided to re-write
the package almost entirely in base R, to remove as many dependencies as
possible.</p>
</div>
<div id="features-and-flexibility" class="section level2">
<h2>Features and flexibility</h2>
<p>One thing that was missing from COINr was proper support for panel
data (time-dependent data). This has now been mostly rectified with the
introduction of the “purse” class. The main “building” functions of
COINr have also been re-written as generics, with methods for coins,
data frames and purses. Moreover many functions allow you to call other
functions, which makes COINr much easier to link up with other
packages.</p>
</div>
<div id="syntax" class="section level2">
<h2>Syntax</h2>
<p>COINr syntax was inconsistent. While this was not a critical problem,
since I was making big changes to the package I decided to take the
opportunity to make the syntax as consistent as possible. This is a
one-off change and won’t be messed around with any more!</p>
</div>
</div>
<div id="whats-changed" class="section level1">
<h1>What’s changed?</h1>
<div id="function-names" class="section level2">
<h2>Function names</h2>
<p>Many things have changed. The first thing you will probably notice is
the syntax. Because I was anyway making syntax-breaking changes to the
package, I decided to go all in, and try to make the syntax as
consistent as possible. This means that function names are more
predictable: all “building” functions start with a capital letter. Plot
functions start with <code>plot_</code>. Analysis functions mostly start
with <code>get_</code>. Functions are generally in lower case. This all
hopefully makes the package a little easier to use. You will notice that
calling an old &lt; v1.0 function name will generate an error, which
redirects you to the new function name. My hope is that although this is
inconvenient, it will not take too long to adapt to the new function
names. In most functions, the main logic behind the arguments is pretty
similar. As mentioned above, I’m not going to change all the names
again; this is a one-off thing.</p>
</div>
<div id="function-features" class="section level2">
<h2>Function features</h2>
<p>The second obvious change is that some of the key functions
themselves have changed syntax: they have been re-written to be more
flexible and more robust. This may seem annoying but I promise you it is
for the greater good. I can’t describe all the changes here, but in
general functions have been made more flexible: for example
<code>Normalise()</code> now can take any normalising function, rather
than a fixed set of options. Outlier treatment also allows to pass
outlier detection and treatment functions. The sensitivity analysis
function (now <code>get_sensitivity()</code>) now allows to target any
part of the coin at all, not just function arguments. In general, the
core “building” functions now call other lower-level functions and this
makes it easier to hook COINr up to other packages, for example using
more sophisticated imputation and aggregation methods.</p>
</div>
<div id="new-coin-class-and-methods" class="section level2">
<h2>New “coin” class and methods</h2>
<p>The third related change that is perhaps not so obvious is that the
structure of the central object in COINr, the “COIN”, has changed. The
object has been streamlined and tidied, and has a new S3 class called a
“coin” (the difference being that the new coin is lower case). If you
have previously built a COIN using an older version of COINr, it will
not work in the new version of COINr! But the good news is that there is
a handy function called <code>COIN_to_coin()</code> which converts the
older “COIN” class to the newer “coin” class.</p>
<p>The new “coin” class also comes with a number of methods. All the
main construction functions now have methods for at least coins, data
frames and purses (see next sub-section), and some have methods for
numerical vectors. This is in contrast to the older COINr versions which
did not define formal methods. See the <a href="coins.html">Building
coins</a> vignette for more details.</p>
</div>
<div id="purses-and-panel-data" class="section level2">
<h2>Purses and panel data</h2>
<p>The new “purse” class gives a formal way to deal with panel data
(time indexed data). A “purse” is a time-indexed collection of coins.
All construction functions have purse methods, so working with time data
becomes very straightforward.</p>
<p>Purses and purse methods are still being expanded in COINr so keep an
eye out for new features if you are interested. See the <a href="coins.html">Building coins</a> vignette for more details.</p>
</div>
<div id="documentation" class="section level2">
<h2>Documentation</h2>
<p>The next thing is that the documentation has been completely
re-written, with loads of new vignettes! And even better, COINr now
lives at a web-page built with “pkgdown” which you can find <a href="https://bluefoxr.github.io/COINr/">here</a>, where all the
documentation is easily accessible. So each function is well-documented.
Hurray.</p>
</div>
<div id="removed-functions" class="section level2">
<h2>Removed functions</h2>
<p>The last very obvious change is that some functions have disappeared!
Where have they gone? You may notice that all functions that generated
interactive plots (often called <code>iPlot*</code> in previous versions
of COINr), plus all shiny apps, have vanished. The reason for this, as
explained above, is that these tools were distracting from the main
point of the package and were too much effort to maintain. Moreover,
even though interactive plots are great if you are outputting html
documents, for pdf and word they are a hassle because it is quite
unpredictable how they will be rendered. The good news is that I have
replaced some of the interactive plots with static versions, such as
<code>plot_framework()</code>, and <code>plot_scatter()</code>, so you
can still do most of the plotting as in the previous versions, but with
more predictable (and more usable) outputs.</p>
</div>
</div>
<div id="coinr6-i-want-out" class="section level1">
<h1>COINr6: I want out!</h1>
<p>If this level of upheaval is all a bit too much, and you’d like to go
back to how things were before, you have two options. The easiest
“roll-back” option is to install the “COINr6” package. COINr6 is the
latest version of COINr <em>before</em> the major syntax changes. This
means that if you wrote some scripts or markdown files in the old
syntax, instead of loading COINr, install and load COINr6, and this will
run as before.</p>
<p>The advantage of this is that you can have COINr (new syntax) and
COINr6 (old syntax) both installed at the same time.</p>
<p>To install COINr6 you have to install it from GitHub. First, make
sure you have the “remotes” package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install remotes package if you don&#39;t have it</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;remotes&quot;</span>)</span></code></pre></div>
<p>Now install COINr6 from the GitHub repo:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;bluefoxr/COINr6&quot;</span>)</span></code></pre></div>
<p>And that’s it. I will continue to lightly maintain this package for a
while (e.g. fixing any critical bugs if any arise) but in general the
main focus will be on the new COINr version.</p>
<p>Another way to roll back COINr to an older version is to use
<code>devtools::install_version()</code>, in which you can specify a
version number of any package to install. This might be a bit more
fiddly, and personally I would recommend to rather install COINr6. But
if you want, check out <a href="https://support.posit.co/hc/en-us/articles/219949047-Installing-older-versions-of-packages">this
article</a> for some info on installing older package versions.</p>
<p>COINr and COINr6 have conversion functions: in COINr there is the
<code>COIN_to_coin()</code> function which allows conversion from the
older “COIN” class to the newer “coin” class. In COINr6 there is also
now the reverse function, <code>coin_to_COIN()</code>, which allows
access to all the old interactive plotting of COINr6 if you liked that,
as well as the apps. Note that conversion comes with some limitations in
both directions, which are discussed in those functions’
documentation.</p>
</div>
<div id="summary" class="section level1">
<h1>Summary</h1>
<p>In summary, COINr has changed quite a lot, but that is a Good Thing.
If you do want to roll back, or have both old and new syntax side by
side, install COINr6.</p>
<p>As usual, if you have any feedback, spot any bugs or have any
suggestions, email me or <a href="https://github.com/bluefoxr/COINr/issues">open an issue</a> in the
GitHub repo.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
